<?xml version="1.0" encoding="UTF-8"?>
<!--
 [y] hybris Platform

 Copyright (c) 2000-2013 hybris AG
 All rights reserved.

 This software is the confidential and proprietary information of hybris
 ("Confidential Information"). You shall not disclose such Confidential
 Information and shall use it only in accordance with the terms of the
 license agreement you entered into with hybris.
-->


<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd"
       default-autowire="byName">

    <!-- extend call context with Braintree section -->
    <alias alias="csCallContextWidgetRenderer" name="btCallContextWidgetRenderer"/>
    <bean id="btCallContextWidgetRenderer" parent="defaultCsCallContextWidgetRenderer"
          class="com.braintree.cscockpit.widgets.renderers.impl.BraintreeCallContextWidgetRenderer">
    </bean>

    <!-- CUSTOM -->
    <alias alias="csCustomerController" name="btDefaultCsCallContextController"/>
    <alias alias="csCallContextController" name="btDefaultCsCallContextController"/>
    <bean id="btDefaultCsCallContextController" parent="csBaseWidgetController"
          class="com.braintree.cscockpit.widgets.controllers.impl.BTDefaultCallContextController" scope="session">
        <property name="basketController" ref="csBasketController"/>
        <property name="customerOrdersStrategy" ref="csCustomerOrdersStrategy"/>
        <property name="commonI18NService" ref="commonI18NService"/>
        <property name="userService" ref="userService"/>
        <property name="ticketStrategy" ref="csTicketStrategy"/>
        <lookup-method name="lookupBrowserToSwitchOnEndCall" bean="csBasketBrowser"/>
        <property name="widgetToFocusOnEndCall" value="basketCartWidget"/>
        <property name="impersonationService" ref="impersonationService"/>
        <property name="widgetHelper" ref="widgetHelper"/>
        <property name="baseSiteService" ref="baseSiteService"/>
        <property name="commerceCommonI18NService" ref="commerceCommonI18NService"/>
        <property name="newItemService" ref="newItemService"/>
        <property name="customerAccountService" ref="customerAccountService"/>
    </bean>

    <!-- Braintree transaction search widget -->
    <alias alias="csBraintreeTransactionSearchWidgetConfig" name="defaultCsBraintreeTransactionSearchWidgetConfig"/>
    <bean id="defaultCsBraintreeTransactionSearchWidgetConfig" parent="csBaseWidgetConfig">
        <property name="widgetTitle" value="cscockpit.widget.braintree.transaction.search"/>
        <property name="widgetRenderer" ref="csBraintreeTransactionSearchWidgetRenderer"/>
        <property name="widgetController" ref="csBraintreeTransactionSearchController"/>
        <property name="widgetClass" value="de.hybris.platform.cockpit.widgets.impl.DefaultListboxWidget"/>
        <property name="widgetSclass" value="defaultWidgetFrame csOrderSearchWidgetFrame"/>
        <property name="widgetModel">
            <bean class="de.hybris.platform.cscockpit.widgets.models.impl.TextSearchWidgetModel"/>
        </property>
        <property name="widgetAdapter">
            <bean class="de.hybris.platform.cscockpit.widgets.adapters.TextSearchResultAdapter">
                <property name="cockpitTypeService" ref="cockpitTypeService"/>
            </bean>
        </property>
    </bean>

    <alias alias="csBraintreeTransactionSearchWidgetRenderer" name="defaultCsBraintreeTransactionSearchWidgetRenderer"/>
    <bean id="defaultCsBraintreeTransactionSearchWidgetRenderer" parent="abstractWidgetRenderer"
          class="com.braintree.cscockpit.widgets.renderers.impl.transaction.TransactionSearchWidgetRenderer">
        <property name="listConfigurationCode" value="btTransactionSearchResult"/>
        <property name="transactionDetailPopulator" ref="transactionDetailPopulator"/>
        <property name="csBrainTreeFacade" ref="csBrainTreeFacade"/>
        <property name="listConfigurationType" value="BraintreeTransaction"/>
        <property name="itemAppender">
            <bean class="de.hybris.platform.cscockpit.widgets.controllers.dispatcher.impl.PopupCloseAppender">
                <property name="popupWidgetHelper" ref="popupWidgetHelper"/>
                <property name="itemAppender">
                    <bean class="de.hybris.platform.cscockpit.widgets.controllers.dispatcher.impl.OrderAppender"
                          parent="csBaseAppender"/>
                </property>
            </bean>
        </property>
        <property name="detailItemAppender">
            <bean class="de.hybris.platform.cscockpit.widgets.controllers.dispatcher.impl.PopupCloseAppender">
                <property name="popupWidgetHelper" ref="popupWidgetHelper"/>
                <property name="itemAppender">
                    <bean class="com.braintree.cscockpit.widgets.controllers.dispatcher.impl.TransactionAdapter"
                          parent="csBaseAppender"/>
                </property>
            </bean>
        </property>
    </bean>

    <alias alias="csBraintreeTransactionSearchController" name="defaultCsBraintreeTransactionSearchController"/>
    <bean id="defaultCsBraintreeTransactionSearchController" parent="csBaseDefaultSearchController"
          class="com.braintree.cscockpit.widgets.controllers.search.impl.BraintreeSearchCommandController">
        <property name="searchService" ref="csBraintreeTransactionSearchService"/>
    </bean>

    <!-- call context widget -->
    <alias alias="csCallContextWidgetConfig" name="defaultCsCallContextWidgetConfig"/>
    <bean id="defaultCsCallContextWidgetConfig" parent="csBaseWidgetConfig">
        <property name="widgetTitle" value="cscockpit.widget.call.context"/>
        <property name="widgetRenderer" ref="csCallContextWidgetRenderer"/>
        <property name="widgetController" ref="csCallContextController"/>
        <property name="widgetSclass" value="defaultWidgetFrame defaultNavWidgetFrame csNavCallContextWidgetFrame"/>
        <property name="lazyLoadingEnabled" value="false"/>
        <property name="widgetModel">
            <bean class="com.braintree.cscockpit.widgets.models.impl.BTCallContextWidgetModel"/>
        </property>
        <property name="widgetAdapter">
            <bean class="com.braintree.cscockpit.widgets.adapters.BTCallContextAdapter">
                <lookup-method name="lookupBtCustomerBrowserModel" bean="csBtCustomerBrowser"/>
                <lookup-method name="lookupTransactionBrowserModel" bean="csTransactionBrowser"/>
                <lookup-method name="lookupCustomerBrowserModel" bean="csCustomerBrowser"/>
                <lookup-method name="lookupOrderBrowserModel" bean="csOrderBrowser"/>
                <lookup-method name="lookupCheckoutBrowserModel" bean="csCheckoutBrowser"/>
                <lookup-method name="lookupTicketBrowserModel" bean="csTicketBrowser"/>
                <property name="widgetHelper" ref="widgetHelper"/>
            </bean>
        </property>
    </bean>

    <!-- Braintree customer search widget -->
    <alias alias="csBraintreeCustomerSearchWidgetConfig" name="defaultCsBraintreeCustomerSearchWidgetConfig"/>
    <bean id="defaultCsBraintreeCustomerSearchWidgetConfig" parent="csBaseWidgetConfig">
        <property name="widgetTitle" value="cscockpit.widget.braintree.customer.search"/>
        <property name="widgetRenderer" ref="csBraintreeCustomerSearchWidgetRenderer"/>
        <property name="widgetController" ref="csBraintreeCustomerSearchController"/>
        <property name="widgetClass" value="de.hybris.platform.cockpit.widgets.impl.DefaultListboxWidget"/>
        <property name="widgetSclass" value="defaultWidgetFrame csOrderSearchWidgetFrame"/>
        <property name="widgetModel">
            <bean class="de.hybris.platform.cscockpit.widgets.models.impl.TextSearchWidgetModel"/>
        </property>
        <property name="widgetAdapter">
            <bean class="de.hybris.platform.cscockpit.widgets.adapters.TextSearchResultAdapter">
                <property name="cockpitTypeService" ref="cockpitTypeService"/>
            </bean>
        </property>
    </bean>

    <!-- Browsers -->
    <!-- Transaction information tab -->
    <bean id="csTransactionBrowser" class="de.hybris.platform.cscockpit.widgets.models.impl.CsWidgetBrowserModel"
          scope="prototype">
        <property name="browserSortOrder" value="2500"/>
        <property name="browserCode" value="cscockpit.browser.transaction"/>
        <property name="initiallyOpen" value="false"/>
        <property name="label" value="cscockpit.browser.transaction"/>
        <property name="extendedLabel" value="cscockpit.browser.transaction.ext"/>
        <property name="viewClass" value="de.hybris.platform.cockpit.widgets.impl.DefaultWidgetContentBrowser"/>
        <property name="viewTemplateURI" value="/cscockpit/templates/defaultTransactionLayout.zul"/>
        <property name="widgets">
            <!-- The tab specific widgets in keyboard focus transaction -->
            <list>
                <bean class="de.hybris.platform.cscockpit.widgets.models.impl.CsWidgetBrowserModel$WidgetMapKey">
                    <property name="widgetCode" value="transactionDetailsWidget"/>
                    <property name="widgetConfig" ref="defaultCsTransactionDetailsWidgetConfig"/>
                </bean>
                <bean class="de.hybris.platform.cscockpit.widgets.models.impl.CsWidgetBrowserModel$WidgetMapKey">
                    <property name="widgetCode" value="transactionCustomerDetailsWidget"/>
                    <property name="widgetConfig" ref="defaultCsTransactionCustomerDetailsWidgetConfig"/>
                </bean>
                <bean class="de.hybris.platform.cscockpit.widgets.models.impl.CsWidgetBrowserModel$WidgetMapKey">
                    <property name="widgetCode" value="transactionPaymentDetailsWidget"/>
                    <property name="widgetConfig" ref="defaultCsTransactionPaymentDetailsWidgetConfig"/>
                </bean>
                <bean class="de.hybris.platform.cscockpit.widgets.models.impl.CsWidgetBrowserModel$WidgetMapKey">
                    <property name="widgetCode" value="transactionActionsWidget"/>
                    <property name="widgetConfig" ref="defaultCsTransactionActionsWidgetConfig"/>
                </bean>
            </list>
        </property>
    </bean>


    <!-- Transaction Browser Widgets -->

    <!-- Transaction information -->
    <bean id="defaultCsTransactionDetailsWidgetConfig" parent="csBaseWidgetConfig">
        <property name="widgetTitle" value="cscockpit.widget.transaction.details"/>
        <property name="widgetRenderer" ref="csTransactionDetailsWidgetRenderer"/>
        <property name="widgetController" ref="defaultCsTransactionController"/>
        <property name="widgetSclass" value="defaultWidgetFrame defaultCsTransactionDetailsWidgetConfig"/>
        <property name="widgetModel" ref="csTransactionItemWidgetModel"/>
        <property name="widgetAdapter" ref="defaultCsTransactionDetailsWidgetAdapter"/>
    </bean>

    <!-- Customer information -->
    <bean id="defaultCsTransactionCustomerDetailsWidgetConfig" parent="csBaseWidgetConfig">
        <property name="widgetTitle" value="cscockpit.widget.transaction.customer.details"/>
        <property name="widgetRenderer" ref="csTransactionCustomerDetailsWidgetRenderer"/>
        <property name="widgetController" ref="defaultCsTransactionController"/>
        <property name="widgetSclass" value="defaultWidgetFrame defaultCsTransactionDetailsWidgetConfig"/>
        <property name="widgetModel" ref="csTransactionItemWidgetModel"/>
        <property name="widgetAdapter" ref="defaultCsTransactionDetailsWidgetAdapter"/>
    </bean>

    <!-- Payment information -->
    <bean id="defaultCsTransactionPaymentDetailsWidgetConfig" parent="csBaseWidgetConfig">
        <property name="widgetTitle" value="cscockpit.widget.transaction.payment.details"/>
        <property name="widgetRenderer" ref="csTransactionPaymentDetailsWidgetRenderer"/>
        <property name="widgetController" ref="defaultCsTransactionController"/>
        <property name="widgetSclass" value="defaultWidgetFrame defaultCsTransactionDetailsWidgetConfig"/>
        <property name="widgetModel" ref="csTransactionItemWidgetModel"/>
        <property name="widgetAdapter" ref="defaultCsTransactionDetailsWidgetAdapter"/>
    </bean>

    <!--Transaction Actions widget-->
    <bean id="defaultCsTransactionActionsWidgetConfig" parent="csBaseWidgetConfig">
        <property name="widgetTitle" value="cscockpit.widget.transaction.transactionmanagement"/>
        <property name="widgetRenderer" ref="defaultCsTransactionActionsWidgetRenderer"/>
        <property name="widgetController" ref="defaultCsTransactionManagementActionsWidgetController"/>
        <property name="widgetModel" ref="csTransactionItemWidgetModel"/>
        <property name="widgetAdapter" ref="defaultCsTransactionDetailsWidgetAdapter"/>
    </bean>

    <!-- Transaction Clone widget -->
    <bean id="defaultCsCloneTransactionWidgetConfig" parent="csBaseWidgetConfig">
        <property name="widgetTitle" value="cscockpit.widget.transaction.clone"/>
        <property name="widgetRenderer" ref="csCloneTransactionWidgetRenderer"/>
        <property name="widgetController" ref="defaultCsTransactionController"/>
        <property name="widgetModel" ref="csTransactionItemWidgetModel"/>
    </bean>

    <bean id="csCloneTransactionWidgetRenderer" parent="abstractTransactionWidgetRenderer"
          class="com.braintree.cscockpit.widgets.renderers.impl.transaction.actions.TransactionCloneWidgetRenderer">
        <property name="popupWidgetHelper" ref="popupWidgetHelper"/>
        <property name="enumerationService" ref="enumerationService"/>
        <property name="brainTreeConfigService" ref="brainTreeConfigService"/>
    </bean>

    <bean id="abstractTransactionWidgetRenderer" parent="abstractWidgetRenderer" scope="prototype" abstract="true"
          class="com.braintree.cscockpit.widgets.renderers.impl.transaction.actions.AbstractTransactionActionsWidgetRenderer">
        <property name="popupWidgetHelper" ref="popupWidgetHelper"/>
        <property name="enumerationService" ref="enumerationService"/>
        <property name="csBrainTreeFacade" ref="csBrainTreeFacade"/>
        <property name="detailItemAppender">
            <bean class="de.hybris.platform.cscockpit.widgets.controllers.dispatcher.impl.PopupCloseAppender">
                <property name="popupWidgetHelper" ref="popupWidgetHelper"/>
                <property name="itemAppender">
                    <bean class="com.braintree.cscockpit.widgets.controllers.dispatcher.impl.TransactionAdapter"
                          parent="csBaseAppender"/>
                </property>
            </bean>
        </property>
    </bean>

    <!-- Transaction Refund widget -->
    <bean id="defaultCsRefundTransactionWidgetConfig" parent="csBaseWidgetConfig">
        <property name="widgetTitle" value="cscockpit.widget.transaction.refund"/>
        <property name="widgetRenderer" ref="csRefundTransactionWidgetRenderer"/>
        <property name="widgetController" ref="defaultCsTransactionController"/>
        <property name="widgetModel" ref="csTransactionItemWidgetModel"/>
    </bean>

    <bean id="csRefundTransactionWidgetRenderer" parent="abstractTransactionWidgetRenderer"
          class="com.braintree.cscockpit.widgets.renderers.impl.transaction.actions.TransactionRefundWidgetRenderer">
    </bean>

    <!-- Transaction SubmitForSettlement widget -->
    <bean id="defaultCsSubmitForSettlementTransactionWidgetConfig" parent="csBaseWidgetConfig">
        <property name="widgetTitle" value="cscockpit.widget.transaction.sfs"/>
        <property name="widgetRenderer" ref="csSubmitForSettlementTransactionWidgetRenderer"/>
        <property name="widgetController" ref="defaultCsTransactionController"/>
        <property name="widgetModel" ref="csTransactionItemWidgetModel"/>
    </bean>

    <bean id="csSubmitForSettlementTransactionWidgetRenderer" parent="abstractTransactionWidgetRenderer"
          class="com.braintree.cscockpit.widgets.renderers.impl.transaction.actions.TransactionSubmitForSettlementWidgetRenderer">
    </bean>

    <alias alias="csBraintreeCustomerSearchWidgetRenderer" name="defaultCsBraintreeCustomerSearchWidgetRenderer"/>
    <bean id="defaultCsBraintreeCustomerSearchWidgetRenderer" parent="abstractWidgetRenderer"
          class="com.braintree.cscockpit.widgets.renderers.impl.customer.CustomerSearchWidgetRenderer">
        <property name="listConfigurationCode" value="btCustomerSearchResult"/>
        <property name="listConfigurationType" value="Customer"/>
        <property name="csBrainTreeFacade" ref="csBrainTreeFacade"/>
        <property name="customerDetailsPopulator" ref="customerDetailsPopulator"/>
        <property name="itemAppender">
            <bean class="de.hybris.platform.cscockpit.widgets.controllers.dispatcher.impl.PopupCloseAppender">
                <property name="popupWidgetHelper" ref="popupWidgetHelper"/>
                <property name="itemAppender">
                    <bean class="com.braintree.cscockpit.widgets.controllers.dispatcher.impl.CustomerDetailAdapter"
                          parent="csBaseAppender"/>
                </property>
            </bean>
        </property>
    </bean>

    <!-- RENRDERER -->
    <bean id="csTransactionDetailsWidgetRenderer" parent="abstractWidgetRenderer"
          class="com.braintree.cscockpit.widgets.renderers.impl.transaction.TransactionDetailsWidgetRenderer">
        <property name="detailRenderer">
            <bean class="com.braintree.cscockpit.widgets.renderers.details.impl.TransactionDetailsListRender"
                  parent="abstractWidgetDetailRenderer">
                <property name="enumerationService" ref="enumerationService"/>
                <property name="customerModelLabelProvider" ref="customerModelLabelProvider"/>
                <property name="configurationCode" value="orderDetailsList"/>
            </bean>
        </property>
    </bean>

    <bean id="csTransactionCustomerDetailsWidgetRenderer" parent="csTransactionDetailsWidgetRenderer"
          class="com.braintree.cscockpit.widgets.renderers.impl.transaction.TransactionCustomerDetailsWidgetRenderer">
        <property name="detailRenderer">
            <bean class="com.braintree.cscockpit.widgets.renderers.details.impl.TransactionCustomerDetailsListRender"
                  parent="abstractWidgetDetailRenderer">
                <property name="enumerationService" ref="enumerationService"/>
                <property name="customerModelLabelProvider" ref="customerModelLabelProvider"/>
                <property name="configurationCode" value="orderDetailsList"/>
            </bean>
        </property>
    </bean>

    <bean id="csTransactionPaymentDetailsWidgetRenderer" parent="csTransactionDetailsWidgetRenderer"
          class="com.braintree.cscockpit.widgets.renderers.impl.transaction.TransactionCustomerDetailsWidgetRenderer">
        <property name="detailRenderer">
            <bean class="com.braintree.cscockpit.widgets.renderers.details.impl.TransactionPaymentDetailsListRender"
                  parent="abstractWidgetDetailRenderer">
                <property name="enumerationService" ref="enumerationService"/>
                <property name="customerModelLabelProvider" ref="customerModelLabelProvider"/>
                <property name="configurationCode" value="orderDetailsList"/>
            </bean>
        </property>
    </bean>

    <bean id="defaultCsTransactionActionsWidgetRenderer" parent="abstractWidgetRenderer"
          class="com.braintree.cscockpit.widgets.renderers.impl.transaction.actions.TransactionManagementActionsWidgetRenderer">
        <property name="popupWidgetHelper" ref="popupWidgetHelper"/>
        <property name="csBrainTreeFacade" ref="csBrainTreeFacade"/>
    </bean>

    <!-- WIDGET ADAPTERS -->
    <bean id="defaultCsTransactionDetailsWidgetAdapter"
          class="com.braintree.cscockpit.widgets.adapters.TransactionDetailsAdapter"
          scope="session"/>

    <!-- WIDGET CONTROLLERS -->
    <!-- Transaction details controller -->
    <bean id="defaultCsTransactionController" scope="session" parent="csAbstractCallContextDependantController"
          class="com.braintree.cscockpit.widgets.controllers.impl.DefaultTransactionController">
        <property name="callContextController" ref="csCallContextController"/>
    </bean>

    <bean id="defaultCsTransactionManagementActionsWidgetController" parent="csBaseWidgetController"
          class="com.braintree.cscockpit.widgets.controllers.impl.DefaultTransactionManagementActionsWidgetController"
          scope="session">
        <property name="callContextController" ref="csCallContextController"/>
    </bean>

    <alias alias="csCancellationController" name="btCancellationController"/>
    <bean id="btCancellationController" parent="defaultCsCancellationController"
          class="com.braintree.cscockpit.widgets.controllers.impl.BrainTreeDefaultCancellationController">
        <property name="csBrainTreeFacade" ref="csBrainTreeFacade"/>
    </bean>

    <alias alias="csReturnsController" name="btRefundController"/>
    <bean id="btRefundController" parent="defaultCsReturnsController"
          class="com.braintree.cscockpit.widgets.controllers.impl.BrainTreeDefaultReturnsController">
        <property name="csBrainTreeFacade" ref="csBrainTreeFacade"/>
    </bean>

    <!-- WIDGET MODELS -->
    <bean id="csTransactionItemWidgetModel" class="com.braintree.cscockpit.widgets.models.impl.TransactionItemWidgetModel"
          scope="session"/>


    <alias alias="csBraintreeCustomerSearchController" name="defaultCsBraintreeCustomerSearchController"/>
    <bean id="defaultCsBraintreeCustomerSearchController" parent="csBaseDefaultSearchController"
          class="com.braintree.cscockpit.widgets.controllers.search.impl.BraintreeSearchCommandController">
        <property name="searchService" ref="csBraintreeCustomerSearchService"/>
    </bean>

    <!-- Customer -->
    <!-- Customer information tab -->
    <bean id="csBtCustomerBrowser" class="de.hybris.platform.cscockpit.widgets.models.impl.CsWidgetBrowserModel"
          scope="prototype">
        <property name="browserSortOrder" value="2400"/>
        <property name="browserCode" value="cscockpit.browser.btcustomer"/>
        <property name="initiallyOpen" value="false"/>
        <property name="label" value="cscockpit.browser.btcustomer"/>
        <property name="extendedLabel" value="cscockpit.browser.btcustomer.ext"/>
        <property name="viewClass" value="de.hybris.platform.cockpit.widgets.impl.DefaultWidgetContentBrowser"/>
        <property name="viewTemplateURI" value="/cscockpit/templates/btCustomerLayout.zul"/>
        <property name="widgets">
            <!-- The tab specific widgets in keyboard focus btCustomer -->
            <list>
                <bean class="de.hybris.platform.cscockpit.widgets.models.impl.CsWidgetBrowserModel$WidgetMapKey">
                    <property name="widgetCode" value="btCustomerDetailsWidget"/>
                    <property name="widgetConfig" ref="defaultCsCustomerDetailsWidgetConfig"/>
                </bean>
                <bean class="de.hybris.platform.cscockpit.widgets.models.impl.CsWidgetBrowserModel$WidgetMapKey">
                    <property name="widgetCode" value="btCustomerActionsWidget"/>
                    <property name="widgetConfig" ref="defaultCsCustomerActionsWidgetConfig"/>
                </bean>
                <bean class="de.hybris.platform.cscockpit.widgets.models.impl.CsWidgetBrowserModel$WidgetMapKey">
                    <property name="widgetCode" value="btCustomerPaymentMethodsDetailsWidget"/>
                    <property name="widgetConfig" ref="defaultCsCustomerPaymentMethodsWidgetConfig"/>
                </bean>
                <bean class="de.hybris.platform.cscockpit.widgets.models.impl.CsWidgetBrowserModel$WidgetMapKey">
                    <property name="widgetCode" value="btCustomerAddressBookDetailsWidget"/>
                    <property name="widgetConfig" ref="defaultCsCustomerAddressBookWidgetConfig"/>
                </bean>
            </list>
        </property>
    </bean>

    <!-- Customer information -->
    <bean id="defaultCsCustomerDetailsWidgetConfig" parent="csBaseWidgetConfig">
        <property name="widgetTitle" value="cscockpit.widget.customer.details"/>
        <property name="widgetRenderer" ref="csCustomerDetailsWidgetRenderer"/>
        <property name="widgetController" ref="defaultCsCustomerController"/>
        <property name="widgetSclass" value="defaultWidgetFrame defaultCsCustomerDetailsWidgetConfig"/>
        <property name="widgetModel" ref="csCustomerItemWidgetModel"/>
        <property name="widgetAdapter" ref="defaultCsCustomerDetailsWidgetAdapter"/>
    </bean>

    <bean id="defaultCsCustomerActionsWidgetConfig" parent="csBaseWidgetConfig">
        <property name="widgetTitle" value="cscockpit.widget.customer.actions"/>
        <property name="widgetRenderer" ref="defaultCsCustomerActionsWidgetRenderer"/>
        <property name="widgetController" ref="defaultCsCustomerManagementActionsWidgetController"/>
        <property name="widgetSclass" value="defaultWidgetFrame defaultCsCustomerActionsWidgetConfig"/>
        <property name="widgetModel" ref="csCustomerItemWidgetModel"/>
        <property name="widgetAdapter" ref="defaultCsCustomerDetailsWidgetAdapter"/>
    </bean>

    <bean id="defaultCsCustomerPaymentMethodsWidgetConfig" parent="csBaseWidgetConfig">
        <property name="widgetTitle" value="cscockpit.widget.customer.payment.methods"/>
        <property name="widgetRenderer" ref="defaultCsCustomerPaymentMethodsWidgetRenderer"/>
        <property name="widgetController" ref="defaultCsCustomerController"/>
        <property name="widgetSclass" value="defaultWidgetFrame defaultCsCustomerActionsWidgetConfig"/>
        <property name="widgetModel" ref="csCustomerItemWidgetModel"/>
        <property name="widgetAdapter" ref="defaultCsCustomerDetailsWidgetAdapter"/>
    </bean>

    <bean id="defaultCsCustomerAddressBookWidgetConfig" parent="csBaseWidgetConfig">
        <property name="widgetTitle" value="cscockpit.widget.customer.address.book"/>
        <property name="widgetRenderer" ref="defaultCsCustomerAddressBookWidgetRenderer"/>
        <property name="widgetController" ref="defaultCsCustomerController"/>
        <property name="widgetSclass" value="defaultWidgetFrame defaultCsCustomerAddressBookWidgetConfig"/>
        <property name="widgetModel" ref="csCustomerItemWidgetModel"/>
        <property name="widgetAdapter" ref="defaultCsCustomerDetailsWidgetAdapter"/>
    </bean>

    <!-- WIDGET MODELS -->
    <bean id="csCustomerItemWidgetModel" class="com.braintree.cscockpit.widgets.models.impl.CustomerItemWidgetModel"
          scope="session"/>

    <!-- WIDGET ADAPTERS -->
    <bean id="defaultCsCustomerDetailsWidgetAdapter" class="com.braintree.cscockpit.widgets.adapters.CustomerDetailsAdapter"
          scope="session"/>

    <!-- WIDGET CONTROLLERS -->
    <!-- Customer details controller -->
    <bean id="defaultCsCustomerController" scope="session" parent="csAbstractCallContextDependantController"
          class="com.braintree.cscockpit.widgets.controllers.impl.DefaultCustomerController">
        <property name="callContextController" ref="csCallContextController"/>
    </bean>

    <bean id="csCustomerDetailsWidgetRenderer" parent="abstractWidgetRenderer"
          class="com.braintree.cscockpit.widgets.renderers.impl.customer.CustomerDetailWidgetRenderer">
        <property name="detailRenderer">
            <bean class="com.braintree.cscockpit.widgets.renderers.details.impl.BraintreeCustomerDetailsListRender"
                  parent="abstractWidgetDetailRenderer">
                <property name="enumerationService" ref="enumerationService"/>
                <property name="customerModelLabelProvider" ref="customerModelLabelProvider"/>
                <property name="configurationCode" value="orderDetailsList"/>
            </bean>
        </property>
    </bean>

    <bean id="defaultCsCustomerActionsWidgetRenderer" parent="abstractWidgetRenderer"
          class="com.braintree.cscockpit.widgets.renderers.impl.customer.CustomerManagementActionsWidgetRenderer">
        <property name="popupWidgetHelper" ref="popupWidgetHelper"/>
        <property name="csBrainTreeFacade" ref="csBrainTreeFacade"/>
    </bean>

    <bean id="defaultCsCustomerPaymentMethodsWidgetRenderer" parent="abstractWidgetRenderer"
          class="com.braintree.cscockpit.widgets.renderers.impl.customer.CustomerPaymentMethodsWidgetRenderer">
        <property name="popupWidgetHelper" ref="popupWidgetHelper"/>
        <property name="csBrainTreeFacade" ref="csBrainTreeFacade"/>
        <property name="itemAppender">
            <bean class="de.hybris.platform.cscockpit.widgets.controllers.dispatcher.impl.PopupCloseAppender">
                <property name="popupWidgetHelper" ref="popupWidgetHelper"/>
                <property name="itemAppender">
                    <bean class="com.braintree.cscockpit.widgets.controllers.dispatcher.impl.CustomerDetailAdapter"
                          parent="csBaseAppender"/>
                </property>
            </bean>
        </property>
    </bean>
    <bean id="defaultCsCustomerAddressBookWidgetRenderer" parent="abstractWidgetRenderer"
          class="com.braintree.cscockpit.widgets.renderers.impl.customer.CustomerAddressBookWidgetRenderer">
        <property name="csBrainTreeFacade" ref="csBrainTreeFacade"/>
        <property name="popupWidgetHelper" ref="popupWidgetHelper"/>
        <property name="defaultUpdateCustomerStrategy" ref="defaultUpdateCustomerStrategy"/>
        <property name="itemAppender">
            <bean class="de.hybris.platform.cscockpit.widgets.controllers.dispatcher.impl.PopupCloseAppender">
                <property name="popupWidgetHelper" ref="popupWidgetHelper"/>
                <property name="itemAppender">
                    <bean class="com.braintree.cscockpit.widgets.controllers.dispatcher.impl.CustomerDetailAdapter"
                          parent="csBaseAppender"/>
                </property>
            </bean>
        </property>
    </bean>

    <bean id="defaultCsCustomerManagementActionsWidgetController" parent="csBaseWidgetController"
          class="com.braintree.cscockpit.widgets.controllers.impl.DefaultCustomerManagementActionWidgetControllerImpl"
          scope="session">
        <property name="callContextController" ref="csCallContextController"/>
    </bean>

    <!-- Edit Customer widget -->
    <bean id="defaultCsEditBtCustomerWidgetConfig" parent="csBaseWidgetConfig">
        <property name="widgetTitle" value="cscockpit.widget.btcustomer.edit"/>
        <property name="widgetRenderer" ref="csEditBtCustomerWidgetRenderer"/>
        <property name="widgetController" ref="defaultCsCustomerController"/>
        <property name="widgetModel" ref="csTransactionItemWidgetModel"/>
    </bean>

    <bean id="defaultCsAddBtPaymentMethodWidgetConfig" parent="csBaseWidgetConfig">
        <property name="widgetTitle" value="cscockpit.widget.btpaymentmethod.add.new"/>
        <property name="widgetRenderer" ref="csAddBtPaymentMethodWidgetRenderer"/>
        <property name="widgetController" ref="defaultCsCustomerController"/>
    </bean>

    <bean id="csAddBtPaymentMethodWidgetRenderer" parent="abstractWidgetRenderer"
          class="com.braintree.cscockpit.widgets.renderers.impl.customer.CustomerPaymentMethodAddWidgetRenderer">
        <property name="popupWidgetHelper" ref="popupWidgetHelper"/>
        <property name="defaultUpdateCustomerStrategy" ref="defaultUpdateCustomerStrategy"/>
        <property name="csBrainTreeFacade" ref="csBrainTreeFacade"/>
        <property name="itemAppender">
            <bean class="de.hybris.platform.cscockpit.widgets.controllers.dispatcher.impl.PopupCloseAppender">
                <property name="popupWidgetHelper" ref="popupWidgetHelper"/>
                <property name="itemAppender">
                    <bean class="com.braintree.cscockpit.widgets.controllers.dispatcher.impl.CustomerDetailAdapter"
                          parent="csBaseAppender"/>
                </property>
            </bean>
        </property>
    </bean>

    <bean id="defaultCsCreateBtAddressWidgetConfig" parent="csBaseWidgetConfig">
        <property name="widgetTitle" value="cscockpit.widget.address.create"/>
        <property name="widgetRenderer" ref="csCreateBtAddressWidgetRenderer"/>
        <property name="widgetController" ref="defaultCsCustomerController"/>
    </bean>

    <bean id="defaultCsEditBtAddressWidgetConfig" parent="csBaseWidgetConfig">
        <property name="widgetTitle" value="cscockpit.widget.address.edit"/>
        <property name="widgetRenderer" ref="csEditBtAddressWidgetRenderer"/>
        <property name="widgetController" ref="defaultCsCustomerController"/>
    </bean>

    <bean id="csEditBtCustomerWidgetRenderer" parent="abstractWidgetRenderer"
          class="com.braintree.cscockpit.widgets.renderers.impl.customer.CustomerEditWidgetRenderer">
        <property name="popupWidgetHelper" ref="popupWidgetHelper"/>
        <property name="enumerationService" ref="enumerationService"/>
        <property name="csBrainTreeFacade" ref="csBrainTreeFacade"/>
        <property name="customerDetailsPopulator" ref="customerDetailsPopulator"/>
        <property name="itemAppender">
            <bean class="de.hybris.platform.cscockpit.widgets.controllers.dispatcher.impl.PopupCloseAppender">
                <property name="popupWidgetHelper" ref="popupWidgetHelper"/>
                <property name="itemAppender">
                    <bean class="com.braintree.cscockpit.widgets.controllers.dispatcher.impl.CustomerDetailAdapter"
                          parent="csBaseAppender"/>
                </property>
            </bean>
        </property>
    </bean>

    <!-- New Transaction  widget -->
    <bean id="defaultCsNewTransactionWidgetConfig" parent="csBaseWidgetConfig">
        <property name="widgetTitle" value="cscockpit.widget.transaction.new"/>
        <property name="widgetRenderer" ref="csNewTransactionWidgetRenderer"/>
        <property name="widgetController" ref="defaultCsTransactionController"/>
        <property name="widgetModel" ref="csTransactionItemWidgetModel"/>
    </bean>

    <bean id="csNewTransactionWidgetRenderer" parent="abstractWidgetRenderer"
          class="com.braintree.cscockpit.widgets.renderers.impl.transaction.NewTransactionWidgetRenderer">
        <property name="popupWidgetHelper" ref="popupWidgetHelper"/>
        <property name="transactionDetailPopulator" ref="transactionDetailPopulator"/>
        <property name="csBrainTreeFacade" ref="csBrainTreeFacade"/>
        <property name="commonI18NService" ref="commonI18NService"/>
        
        <property name="detailItemAppender">
            <bean class="de.hybris.platform.cscockpit.widgets.controllers.dispatcher.impl.PopupCloseAppender">
                <property name="popupWidgetHelper" ref="popupWidgetHelper"/>
                <property name="itemAppender">
                    <bean class="com.braintree.cscockpit.widgets.controllers.dispatcher.impl.TransactionAdapter"
                          parent="csBaseAppender"/>
                </property>
            </bean>
        </property>
    </bean>

    <bean id="defaultCsNewTransactionByTokenWidgetConfig" parent="csBaseWidgetConfig">
        <property name="widgetTitle" value="cscockpit.widget.transaction.new"/>
        <property name="widgetRenderer" ref="csNewTransactionByTokenWidgetRenderer"/>
        <property name="widgetController" ref="defaultCsTransactionController"/>
        <property name="widgetModel" ref="csTransactionItemWidgetModel"/>
    </bean>

    <bean id="csNewTransactionByTokenWidgetRenderer" parent="abstractWidgetRenderer"
          class="com.braintree.cscockpit.widgets.renderers.impl.transaction.NewTransactionMethodTokenWidgetRenderer">
        <property name="popupWidgetHelper" ref="popupWidgetHelper"/>
        <property name="csBrainTreeFacade" ref="csBrainTreeFacade"/>
        <property name="transactionDetailPopulator" ref="transactionDetailPopulator"/>
        <property name="detailItemAppender">
            <bean class="de.hybris.platform.cscockpit.widgets.controllers.dispatcher.impl.PopupCloseAppender">
                <property name="popupWidgetHelper" ref="popupWidgetHelper"/>
                <property name="itemAppender">
                    <bean class="com.braintree.cscockpit.widgets.controllers.dispatcher.impl.TransactionAdapter"
                          parent="csBaseAppender"/>
                </property>
            </bean>
        </property>
    </bean>

	<bean id="csCreateBtAddressWidgetRenderer" parent="abstractWidgetRenderer"
		class="com.braintree.cscockpit.widgets.renderers.impl.customer.AddressCreateWidgetRenderer">
		<property name="popupWidgetHelper" ref="popupWidgetHelper" />
		<property name="csBrainTreeFacade" ref="csBrainTreeFacade" />
		<property name="customerDetailsPopulator" ref="customerDetailsPopulator" />
		<property name="commonI18NService" ref="commonI18NService" />
		<property name="itemAppender">
			<bean
				class="de.hybris.platform.cscockpit.widgets.controllers.dispatcher.impl.PopupCloseAppender">
				<property name="popupWidgetHelper" ref="popupWidgetHelper" />
				<property name="itemAppender">
					<bean
						class="com.braintree.cscockpit.widgets.controllers.dispatcher.impl.CustomerDetailAdapter"
						parent="csBaseAppender" />
				</property>
			</bean>
		</property>

	</bean>

	<bean id="csEditBtAddressWidgetRenderer" parent="abstractWidgetRenderer"
		class="com.braintree.cscockpit.widgets.renderers.impl.customer.AddressEditWidgetRenderer">
		<property name="popupWidgetHelper" ref="popupWidgetHelper" />
		<property name="csBrainTreeFacade" ref="csBrainTreeFacade" />
		<property name="customerDetailsPopulator" ref="customerDetailsPopulator" />
		<property name="commonI18NService" ref="commonI18NService" />
		<property name="itemAppender">
			<bean
				class="de.hybris.platform.cscockpit.widgets.controllers.dispatcher.impl.PopupCloseAppender">
				<property name="popupWidgetHelper" ref="popupWidgetHelper" />
				<property name="itemAppender">
					<bean
						class="com.braintree.cscockpit.widgets.controllers.dispatcher.impl.CustomerDetailAdapter"
						parent="csBaseAppender" />
				</property>
			</bean>
		</property>
	</bean>

    <bean id="defaultCsDetailsPaymentMethodWidgetConfig" parent="csBaseWidgetConfig">
        <property name="widgetTitle" value="cscockpit.widget.customer.payment.method.view"/>
        <property name="widgetRenderer" ref="defaultCsCustomerPaymentMethodsDetailsWidgetRenderer"/>
        <property name="widgetController" ref="defaultCsCustomerController"/>
        <property name="widgetSclass" value="defaultWidgetFrame defaultCsCustomerActionsWidgetConfig"/>
        <property name="widgetModel" ref="csCustomerItemWidgetModel"/>
        <property name="widgetAdapter" ref="defaultCsCustomerDetailsWidgetAdapter"/>
    </bean>

    <bean id="defaultCsCustomerPaymentMethodsDetailsWidgetRenderer" parent="abstractPaymentMethodWidgetRenderer"
          class="com.braintree.cscockpit.widgets.renderers.impl.customer.CustomerPaymentMethodDetailsWidgetRenderer">
    </bean>

    <bean id="defaultCsUpdatePaymentMethodWidgetConfig" parent="csBaseWidgetConfig">
        <property name="widgetTitle" value="cscockpit.widget.customer.payment.method.edit"/>
        <property name="widgetRenderer" ref="defaultCsCustomerUpdatePaymentMethodsWidgetRenderer"/>
        <property name="widgetController" ref="defaultCsCustomerController"/>
        <property name="widgetSclass" value="defaultWidgetFrame defaultCsCustomerActionsWidgetConfig"/>
        <property name="widgetModel" ref="csCustomerItemWidgetModel"/>
        <property name="widgetAdapter" ref="defaultCsCustomerDetailsWidgetAdapter"/>
    </bean>

    <bean id="defaultCsCustomerUpdatePaymentMethodsWidgetRenderer" parent="abstractPaymentMethodWidgetRenderer"
          class="com.braintree.cscockpit.widgets.renderers.impl.customer.CustomerPaymentMethodUpdateWidgetRenderer">
        <property name="csBrainTreeFacade" ref="csBrainTreeFacade"/>
        <property name="defaultUpdateCustomerStrategy" ref="defaultUpdateCustomerStrategy"/>
        <property name="itemAppender">
            <bean class="de.hybris.platform.cscockpit.widgets.controllers.dispatcher.impl.PopupCloseAppender">
                <property name="popupWidgetHelper" ref="popupWidgetHelper"/>
                <property name="itemAppender">
                    <bean class="com.braintree.cscockpit.widgets.controllers.dispatcher.impl.CustomerDetailAdapter"
                          parent="csBaseAppender"/>
                </property>
            </bean>
        </property>
    </bean>

    <bean id="abstractPaymentMethodWidgetRenderer" parent="abstractWidgetRenderer" scope="prototype" abstract="true"
          class="com.braintree.cscockpit.widgets.renderers.impl.customer.AbstractPaymentMethodWidgetRenderer">
        <property name="popupWidgetHelper" ref="popupWidgetHelper"/>
    </bean>

</beans>
